<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oblique Triangle Solver</title>
    
    <!-- MathJax Configuration -->
    <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
    </script>
    <!-- MathJax -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            /* Bright / Light Theme Variables */
            --bg-color: #f0f2f5;           /* Light cool grey background */
            --panel-color: #ffffff;        /* White cards */
            --accent-color: #0066ff;       /* Vibrant Science Blue */
            --text-color: #333333;         /* Dark grey for main text */
            --secondary-text: #666666;     /* Lighter grey for labels */
            --input-bg: #ffffff;           /* White inputs */
            --border-color: #d1d5db;       /* Soft border */
            --success-color: #10b981;      /* Green for success */
            --error-color: #ef4444;        /* Red for errors */
            --step-bg: #f8faff;            /* Very light blue tint for steps */
            --highlight-bg: #e6f2ff;       /* Light blue highlight for results */
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 { margin: 0 0 10px 0; color: var(--accent-color); font-weight: 800; }
        .subtitle { color: var(--secondary-text); margin-bottom: 30px; font-size: 1rem; }

        .container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* Input Section */
        .card {
            background-color: var(--panel-color);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); /* Soft shadow */
            border: 1px solid var(--border-color);
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }

        label { 
            font-size: 0.75rem; 
            text-transform: uppercase; 
            letter-spacing: 0.05em; 
            color: var(--secondary-text); 
            display: block; 
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        select, input {
            width: 100%; padding: 12px;
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-color); 
            font-size: 1rem;
            box-sizing: border-box;
            transition: all 0.2s;
        }
        select:focus, input:focus { 
            outline: none; 
            border-color: var(--accent-color); 
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        button {
            width: 100%;
            background-color: var(--accent-color);
            color: white; 
            border: none; padding: 16px;
            border-radius: 8px; font-size: 1rem; font-weight: 700;
            cursor: pointer; margin-top: 25px;
            text-transform: uppercase; letter-spacing: 0.5px;
            transition: background 0.2s, transform 0.1s;
            box-shadow: 0 4px 6px rgba(0, 102, 255, 0.2);
        }
        button:hover { background-color: #0052cc; transform: translateY(-1px); }
        button:active { transform: translateY(0); }

        /* Results Section */
        .results-header {
            font-size: 1.3rem; 
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 20px; 
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 12px;
        }
        
        .result-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 1rem;
        }
        
        .result-item {
            background: #f9fafb; 
            padding: 15px; border-radius: 8px;
            border-left: 4px solid #ccc;
            display: flex; justify-content: space-between; align-items: center;
        }
        .result-item.highlight { 
            border-left-color: var(--accent-color); 
            background: var(--highlight-bg); 
            color: #0044aa;
        }
        .result-label { color: #777; font-size: 0.9rem; }
        .result-value { font-weight: bold; font-family: 'Courier New', monospace; font-size: 1.1rem; }

        /* Steps Section */
        .steps-container {
            margin-top: 20px;
            display: flex; 
            flex-direction: column;
            gap: 20px;
        }
        
        .step-block {
            background-color: var(--step-bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #eef2ff;
            border-left: 4px solid var(--accent-color);
        }

        .step-title {
            font-weight: bold; color: var(--accent-color); margin-bottom: 12px;
            text-transform: uppercase; font-size: 0.85rem; letter-spacing: 0.5px;
        }

        .math-block {
            overflow-x: auto;
            padding: 5px 0;
            color: #444;
        }

        /* Mobile Responsive */
        @media (max-width: 600px) {
            .input-grid { grid-template-columns: 1fr; }
            .result-grid { grid-template-columns: 1fr; }
            body { padding: 20px 10px; }
        }
    </style>
</head>
<body>

<h1>Triangle Solver</h1>
<div class="subtitle">Enter your known values to see the solution and steps.</div>

<div class="container">
    <!-- INPUTS -->
    <div class="card">
        <label>Method</label>
        <select id="caseSelector">
            <option value="asa">ASA (Angle-Side-Angle)</option>
            <option value="aas">AAS (Angle-Angle-Side)</option>
            <option value="sas">SAS (Side-Angle-Side)</option>
            <option value="sss">SSS (Side-Side-Side)</option>
            <option value="ssa">SSA (Side-Side-Angle) [Ambiguous Case]</option>
        </select>

        <div id="inputs" class="input-grid">
            <!-- Dynamic Inputs -->
        </div>

        <button onclick="solve()">Calculate</button>
    </div>

    <!-- RESULTS -->
    <div id="resultsArea" style="display:none;">
        <!-- Solution 1 -->
        <div class="card" id="solution1">
            <div class="results-header" id="resHeader1">Solution</div>
            <div class="result-grid" id="resGrid1"></div>
        </div>

        <!-- Solution 2 (Only for SSA) -->
        <div class="card" id="solution2" style="display:none;">
            <div class="results-header" style="color: #d97706;">Solution 2 (Ambiguous Case)</div>
            <div class="result-grid" id="resGrid2"></div>
        </div>

        <!-- WORK / STEPS -->
        <div class="card">
            <div class="results-header">Step-by-Step Work</div>
            <div id="stepsOutput" class="steps-container"></div>
        </div>
    </div>
</div>

<script>
    // --- UI CONFIG ---
    const inputConfig = {
        'asa': ['Angle A', 'Side c', 'Angle B'],
        'aas': ['Angle A', 'Angle B', 'Side a'],
        'sss': ['Side a', 'Side b', 'Side c'],
        'sas': ['Side b', 'Angle A', 'Side c'],
        'ssa': ['Angle A', 'Side b', 'Side a'] 
    };

    const selector = document.getElementById('caseSelector');
    const inputsDiv = document.getElementById('inputs');

    function generateInputs() {
        const type = selector.value;
        inputsDiv.innerHTML = '';
        const fields = inputConfig[type];

        fields.forEach((field, index) => {
            const div = document.createElement('div');
            const lbl = document.createElement('label');
            lbl.innerText = field + (field.includes('Angle') ? ' (°)' : '');
            const inp = document.createElement('input');
            inp.type = 'number'; inp.step = 'any'; inp.id = `inp_${index}`;
            inp.placeholder = '0.0';
            div.appendChild(lbl); div.appendChild(inp);
            inputsDiv.appendChild(div);
        });
        // Clear results on change
        document.getElementById('resultsArea').style.display = 'none';
    }

    selector.addEventListener('change', generateInputs);
    generateInputs();

    // --- MATH HELPERS ---
    const toRad = deg => deg * (Math.PI / 180);
    const toDeg = rad => rad * (180 / Math.PI);
    const fmt = num => Number(num).toFixed(3); // Format for display
    
    // --- MAIN SOLVER ---
    function solve() {
        const type = selector.value;
        const v1 = parseFloat(document.getElementById('inp_0').value);
        const v2 = parseFloat(document.getElementById('inp_1').value);
        const v3 = parseFloat(document.getElementById('inp_2').value);

        if (isNaN(v1) || isNaN(v2) || isNaN(v3) || v1 <= 0 || v2 <= 0 || v3 <= 0) {
            alert("Please enter valid positive numbers.");
            return;
        }

        let result = { valid: false, triangles: [], steps: [] };

        try {
            if (type === 'ssa') result = solveSSA(v1, v2, v3);
            else if (type === 'sas') result = solveSAS(v1, v2, v3);
            else if (type === 'asa') result = solveASA(v1, v2, v3);
            else if (type === 'aas') result = solveAAS(v1, v2, v3);
            else if (type === 'sss') result = solveSSS(v1, v2, v3);
        } catch (e) { 
            console.error(e);
            result = { valid: false, steps: ["Calculation Error occurred."] }; 
        }

        displayResults(result);
    }

    // --- DISPLAY LOGIC ---
    function displayResults(result) {
        const area = document.getElementById('resultsArea');
        const sol2Card = document.getElementById('solution2');
        const stepsDiv = document.getElementById('stepsOutput');
        
        area.style.display = 'flex';
        area.style.flexDirection = 'column';
        area.style.gap = '25px';

        stepsDiv.innerHTML = '';
        sol2Card.style.display = 'none';

        if (!result.valid) {
            document.getElementById('resHeader1').innerText = "No Solution";
            document.getElementById('resHeader1').style.color = "var(--error-color)";
            document.getElementById('resGrid1').innerHTML = `<p style="grid-column: span 2; color: #666;">${result.info || "Impossible Triangle"}</p>`;
        } else {
            // Solution 1
            document.getElementById('resHeader1').innerText = result.info || "Solution Found";
            document.getElementById('resHeader1').style.color = "var(--success-color)";
            fillGrid('resGrid1', result.triangles[0]);

            // Solution 2 (SSA only)
            if (result.triangles.length > 1) {
                sol2Card.style.display = 'block';
                fillGrid('resGrid2', result.triangles[1]);
            }
        }

        // Render Steps
        if(result.steps) {
            result.steps.forEach(step => {
                const block = document.createElement('div');
                block.className = 'step-block';
                block.innerHTML = `
                    <div class="step-title">${step.title}</div>
                    <div class="math-block">${step.math}</div>
                `;
                stepsDiv.appendChild(block);
            });
        }

        if (window.MathJax) MathJax.typesetPromise();
    }

    function fillGrid(elementId, t) {
        const el = document.getElementById(elementId);
        el.innerHTML = `
            <div class="result-item"><span class="result-label">Angle A</span> <span class="result-value">${t.A.toFixed(3)}°</span></div>
            <div class="result-item highlight"><span class="result-label">Side a</span> <span class="result-value">${t.a.toFixed(3)}</span></div>
            <div class="result-item"><span class="result-label">Angle B</span> <span class="result-value">${t.B.toFixed(3)}°</span></div>
            <div class="result-item highlight"><span class="result-label">Side b</span> <span class="result-value">${t.b.toFixed(3)}</span></div>
            <div class="result-item"><span class="result-label">Angle C</span> <span class="result-value">${t.C.toFixed(3)}°</span></div>
            <div class="result-item highlight"><span class="result-label">Side c</span> <span class="result-value">${t.c.toFixed(3)}</span></div>
            <div class="result-item" style="grid-column: span 2; justify-content:center; background:none; border:none; border-top: 1px dashed #ccc; border-radius: 0; padding-top: 20px; margin-top: 5px;">
                <small style="color:#666; font-size: 0.9rem;">Area ≈ ${t.area.toFixed(3)} &nbsp;|&nbsp; Perimeter ≈ ${t.perim.toFixed(3)}</small>
            </div>
        `;
    }

    // --- SOLVER ALGORITHMS ---
    function addProps(t) {
        t.perim = t.a + t.b + t.c;
        const s = t.perim / 2;
        t.area = Math.sqrt(s * (s - t.a) * (s - t.b) * (s - t.c));
        return t;
    }

    function solveSAS(b, A, c) {
        const a = Math.sqrt(b*b + c*c - 2*b*c*Math.cos(toRad(A)));
        const B = toDeg(Math.acos((a*a + c*c - b*b)/(2*a*c)));
        const C = 180 - A - B;
        
        const steps = [
            {
                title: "1. Find Side a (Law of Cosines)",
                math: `
                $$ a^2 = b^2 + c^2 - 2bc \\cos(A) $$
                $$ a = \\sqrt{ ${b}^2 + ${c}^2 - 2(${b})(${c}) \\cos(${A}^\\circ) } $$
                $$ a \\approx ${fmt(a)} $$`
            },
            {
                title: "2. Find Angle B (Law of Cosines)",
                math: `
                $$ \\cos(B) = \\frac{a^2 + c^2 - b^2}{2ac} $$
                $$ B = \\cos^{-1}\\left( \\frac{${fmt(a)}^2 + ${c}^2 - ${b}^2}{2(${fmt(a)})(${c})} \\right) $$
                $$ B \\approx ${fmt(B)}^\\circ $$`
            },
            {
                title: "3. Find Angle C (Angle Sum)",
                math: `
                $$ C = 180^\\circ - A - B $$
                $$ C = 180^\\circ - ${A}^\\circ - ${fmt(B)}^\\circ \\approx ${fmt(C)}^\\circ $$`
            }
        ];
        
        return { valid: true, triangles: [addProps({a,b,c,A,B,C})], steps: steps };
    }

    function solveASA(A, c, B) {
        const C = 180 - A - B;
        if (C <= 0) return { valid: false, info: "Sum of angles ≥ 180°" };

        const a = c * Math.sin(toRad(A)) / Math.sin(toRad(C));
        const b = c * Math.sin(toRad(B)) / Math.sin(toRad(C));

        const steps = [
            {
                title: "1. Find Angle C",
                math: `$$ C = 180^\\circ - A - B = 180 - ${A} - ${B} = ${fmt(C)}^\\circ $$`
            },
            {
                title: "2. Find Side a (Law of Sines)",
                math: `
                $$ \\frac{a}{\\sin A} = \\frac{c}{\\sin C} \\Rightarrow a = \\frac{c \\sin A}{\\sin C} $$
                $$ a = \\frac{${c} \\sin(${A}^\\circ)}{\\sin(${fmt(C)}^\\circ)} \\approx ${fmt(a)} $$`
            },
            {
                title: "3. Find Side b (Law of Sines)",
                math: `
                $$ b = \\frac{c \\sin B}{\\sin C} = \\frac{${c} \\sin(${B}^\\circ)}{\\sin(${fmt(C)}^\\circ)} \\approx ${fmt(b)} $$`
            }
        ];

        return { valid: true, triangles: [addProps({a,b,c,A,B,C})], steps: steps };
    }

    function solveAAS(A, B, a) {
        const C = 180 - A - B;
        if (C <= 0) return { valid: false, info: "Sum of angles ≥ 180°" };

        const b = a * Math.sin(toRad(B)) / Math.sin(toRad(A));
        const c = a * Math.sin(toRad(C)) / Math.sin(toRad(A));

        const steps = [
            {
                title: "1. Find Angle C",
                math: `$$ C = 180^\\circ - A - B = 180 - ${A} - ${B} = ${fmt(C)}^\\circ $$`
            },
            {
                title: "2. Find Side b (Law of Sines)",
                math: `
                $$ \\frac{b}{\\sin B} = \\frac{a}{\\sin A} \\Rightarrow b = \\frac{a \\sin B}{\\sin A} $$
                $$ b = \\frac{${a} \\sin(${B}^\\circ)}{\\sin(${A}^\\circ)} \\approx ${fmt(b)} $$`
            },
            {
                title: "3. Find Side c (Law of Sines)",
                math: `
                $$ c = \\frac{a \\sin C}{\\sin A} = \\frac{${a} \\sin(${fmt(C)}^\\circ)}{\\sin(${A}^\\circ)} \\approx ${fmt(c)} $$`
            }
        ];

        return { valid: true, triangles: [addProps({a,b,c,A,B,C})], steps: steps };
    }

    function solveSSS(a, b, c) {
        if (a+b<=c || a+c<=b || b+c<=a) return { valid: false, info: "Invalid Triangle (Triangle Inequality)" };

        const A = toDeg(Math.acos((b*b + c*c - a*a)/(2*b*c)));
        const B = toDeg(Math.acos((a*a + c*c - b*b)/(2*a*c)));
        const C = 180 - A - B;

        const steps = [
            {
                title: "1. Find Angle A (Law of Cosines)",
                math: `
                $$ \\cos A = \\frac{b^2 + c^2 - a^2}{2bc} $$
                $$ A = \\cos^{-1}\\left( \\frac{${b}^2 + ${c}^2 - ${a}^2}{2(${b})(${c})} \\right) \\approx ${fmt(A)}^\\circ $$`
            },
            {
                title: "2. Find Angle B (Law of Cosines)",
                math: `
                $$ \\cos B = \\frac{a^2 + c^2 - b^2}{2ac} $$
                $$ B = \\cos^{-1}\\left( \\frac{${a}^2 + ${c}^2 - ${b}^2}{2(${a})(${c})} \\right) \\approx ${fmt(B)}^\\circ $$`
            },
            {
                title: "3. Find Angle C",
                math: `$$ C = 180^\\circ - ${fmt(A)}^\\circ - ${fmt(B)}^\\circ \\approx ${fmt(C)}^\\circ $$`
            }
        ];

        return { valid: true, triangles: [addProps({a,b,c,A,B,C})], steps: steps };
    }

    function solveSSA(A, b, a) {
        const h = b * Math.sin(toRad(A));
        let steps = [];
        
        steps.push({
            title: "Check for Ambiguity",
            math: `
            $$ \\text{Height } h = b \\sin A = ${b} \\sin(${A}^\\circ) \\approx ${fmt(h)} $$
            $$ \\text{Compare side } a (${a}) \\text{ with } h $$`
        });

        if (A >= 180) return { valid: false, info: "Angle A must be < 180°" };

        if (A < 90) {
            if (a < h - 0.0001) {
                steps.push({ title: "Result", math: `$$ a < h \\implies \\text{No Solution (Side a is too short)} $$`});
                return { valid: false, steps: steps, info: "No Solution" };
            }
            // 1 Solution
            if (Math.abs(a - h) < 0.0001 || a >= b) {
                const B = toDeg(Math.asin((b * Math.sin(toRad(A))) / a));
                const C = 180 - A - B;
                const c = (a * Math.sin(toRad(C))) / Math.sin(toRad(A));
                
                steps.push({
                    title: "One Solution Case",
                    math: `$$ \\text{Since } a \\ge b \\text{ (or } a=h \\text{), there is exactly 1 solution.} $$`
                });
                steps.push({
                    title: "Solve Triangle 1",
                    math: `
                    $$ \\frac{\\sin B}{b} = \\frac{\\sin A}{a} \\implies \\sin B = \\frac{${b} \\sin ${A}^\\circ}{${a}} $$
                    $$ B \\approx ${fmt(B)}^\\circ $$
                    $$ C = 180 - A - B \\approx ${fmt(C)}^\\circ $$
                    $$ c = \\frac{a \\sin C}{\\sin A} \\approx ${fmt(c)} $$`
                });

                return { valid: true, triangles: [addProps({A, B, C, a, b, c})], steps: steps };
            }

            // 2 Solutions (Ambiguous)
            const B1 = toDeg(Math.asin((b * Math.sin(toRad(A))) / a));
            const C1 = 180 - A - B1;
            const c1 = (a * Math.sin(toRad(C1))) / Math.sin(toRad(A));

            const B2 = 180 - B1;
            const C2 = 180 - A - B2;
            const c2 = (a * Math.sin(toRad(C2))) / Math.sin(toRad(A));

            steps.push({
                title: "Ambiguous Case Found",
                math: `$$ h < a < b \\implies \\text{Two valid Triangles exist.} $$`
            });
            steps.push({
                title: "Triangle 1 (Acute Angle B)",
                math: `
                $$ \\sin B_1 = \\frac{b \\sin A}{a} = \\frac{${b} \\sin ${A}}{${a}} $$
                $$ B_1 \\approx ${fmt(B1)}^\\circ $$
                $$ C_1 = 180 - ${A} - ${fmt(B1)} \\approx ${fmt(C1)}^\\circ $$
                $$ c_1 = \\frac{a \\sin C_1}{\\sin A} \\approx ${fmt(c1)} $$`
            });
            steps.push({
                title: "Triangle 2 (Obtuse Angle B)",
                math: `
                $$ B_2 = 180^\\circ - B_1 \\approx ${fmt(B2)}^\\circ $$
                $$ C_2 = 180 - ${A} - ${fmt(B2)} \\approx ${fmt(C2)}^\\circ $$
                $$ c_2 = \\frac{a \\sin C_2}{\\sin A} \\approx ${fmt(c2)} $$`
            });

            return { 
                valid: true, 
                triangles: [addProps({A, B:B1, C:C1, a, b, c:c1}), addProps({A, B:B2, C:C2, a, b, c:c2})], 
                steps: steps, 
                info: "2 Solutions (Ambiguous Case)" 
            };
        } else {
            // Obtuse Angle A
            if (a <= b) {
                steps.push({ title: "Result", math: `$$ a \\le b \\text{ with Obtuse Angle A} \\implies \\text{No Solution} $$`});
                return { valid: false, steps: steps, info: "No Solution" };
            }
            const B = toDeg(Math.asin((b * Math.sin(toRad(A))) / a));
            const C = 180 - A - B;
            const c = Math.sqrt(a*a + b*b - 2*a*b*Math.cos(toRad(C)));
            
            steps.push({
                title: "Obtuse Case",
                math: `
                $$ a > b \\implies 1 \\text{ Solution} $$
                $$ \\sin B = \\frac{b \\sin A}{a} \\implies B \\approx ${fmt(B)}^\\circ $$
                $$ C = 180 - A - B \\approx ${fmt(C)}^\\circ $$
                $$ c \\text{ via Law of Cosines} \\approx ${fmt(c)} $$`
            });

            return { valid: true, triangles: [addProps({ A, B, C, a, b, c })], steps: steps };
        }
    }

</script>
</body>
</html>
